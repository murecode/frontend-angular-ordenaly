"use strict";(self.webpackChunkgifsApp=self.webpackChunkgifsApp||[]).push([[246],{6246:(X,f,i)=>{i.r(f),i.d(f,{default:()=>L});var c=i(177),l=i(3326),e=i(4438),v=i(6354),m=i(9437),p=i(7673),g=i(7669),F=i(1626);let u=(()=>{class r{constructor(t){this.http=t,this.baseUrl=g.c.baseUrl}getOrders(){return this.http.get(`${this.baseUrl}/orders`).pipe((0,v.T)(t=>t.content))}getOrderById(t){return this.http.get(`${this.baseUrl}/orders/${t}`).pipe((0,m.W)(()=>(0,p.of)(void 0)))}getOrdersByPayment(t){return this.http.get(`${this.baseUrl}/orders/status/${t}`).pipe((0,v.T)(o=>o.content))}getOrderDetails(t){return this.http.get(`${this.baseUrl}/carts/orders/${t}`).pipe((0,m.W)(()=>(0,p.of)(void 0)))}newOrder(t){return this.http.post(`${this.baseUrl}/orders`,t)}static#e=this.\u0275fac=function(o){return new(o||r)(e.KVO(F.Qq))};static#t=this.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();const k=r=>["details/",r];function y(r,d){1&r&&(e.j41(0,"span",21),e.qSk(),e.j41(1,"svg",22),e.nrm(2,"path",23),e.k0s(),e.joV(),e.j41(3,"p",24),e.EFF(4,"Pagado"),e.k0s()())}function O(r,d){1&r&&(e.j41(0,"span",25),e.qSk(),e.j41(1,"svg",22),e.nrm(2,"path",26),e.k0s(),e.joV(),e.j41(3,"p",24),e.EFF(4,"Pendiente de pago"),e.k0s()())}function j(r,d){if(1&r&&(e.j41(0,"div")(1,"div",10)(2,"div",11)(3,"p",12),e.EFF(4,"Comanda: "),e.j41(5,"span"),e.EFF(6),e.k0s()(),e.DNE(7,y,5,0,"span",13)(8,O,5,0,"span",14),e.k0s(),e.j41(9,"div",15)(10,"dl",16)(11,"div",17)(12,"dt",18),e.EFF(13,"Hora:"),e.k0s(),e.j41(14,"dd",19),e.EFF(15),e.k0s()(),e.j41(16,"div",17)(17,"dt",18),e.EFF(18,"Mesa: "),e.k0s(),e.j41(19,"dd",19),e.EFF(20),e.k0s()(),e.j41(21,"div",17)(22,"dt",18),e.EFF(23,"Personas:"),e.k0s(),e.j41(24,"dd",19),e.EFF(25),e.k0s()(),e.j41(26,"div",17)(27,"dt",18),e.EFF(28,"Mesero: "),e.k0s(),e.j41(29,"dd",19),e.EFF(30),e.k0s()()(),e.j41(31,"button",20),e.EFF(32,"Ver pedido "),e.k0s()()()()),2&r){const t=d.$implicit;e.R7$(6),e.JRh(t.ticket),e.R7$(),e.Y8G("ngIf","PAID"===t.paymentStatus),e.R7$(),e.Y8G("ngIf","PENDING"===t.paymentStatus),e.R7$(7),e.JRh(t.createdAt),e.R7$(5),e.JRh(t.table),e.R7$(5),e.JRh(t.numberOfPeople),e.R7$(5),e.JRh(t.waiter),e.R7$(),e.Y8G("routerLink",e.eq3(8,k,t.order))}}function E(r,d){if(1&r&&(e.j41(0,"div")(1,"div",8),e.DNE(2,j,33,10,"div",9),e.k0s()()),2&r){const t=e.XpG();e.R7$(2),e.Y8G("ngForOf",t.orderList)}}function w(r,d){1&r&&(e.j41(0,"div"),e.EFF(1," No se encontraron ordenes.\n"),e.k0s())}let C=(()=>{class r{constructor(t){this.orderService=t,this.orderList=[]}ngOnInit(){this.loadAllOrders()}selectOption(t){const s=t.target.value;"ALL"==s?this.loadAllOrders():this.loadOrdersByPayment(s)}loadAllOrders(){this.orderService.getOrders().subscribe(t=>this.orderList=t)}loadOrdersByPayment(t){this.orderService.getOrdersByPayment(t).subscribe(o=>this.orderList=o)}static#e=this.\u0275fac=function(o){return new(o||r)(e.rXU(u))};static#t=this.\u0275cmp=e.VBU({type:r,selectors:[["app-list-page"]],standalone:!0,features:[e.aNF],decls:13,vars:2,consts:[[1,"flex","p-2","justify-end"],[1,"border-orange-400","border-2","rounded-lg","bg-orange-400","p-1.5"],[1,"text-white"],[1,"p-1","rounded-md","text-gray-600",3,"change"],["value","ALL"],["value","PENDING"],["value","PAID"],[4,"ngIf"],[1,"md:px-4","md:grid","md:grid-cols-2","m-2","lg:grid-cols-3","gap-5","space-y-2","md:space-y-0"],[4,"ngFor","ngForOf"],[1,"max-w-*","bg-white","px-4","pt-4","pb-2","rounded-xl","shadow-md","hover:size"],[1,"flex","items-center","justify-between","pb-1","border-b-2","border-orange-400","border-dashed"],[1,"text-lg","font-bold","text-orange-400"],["class","inline-flex items-center justify-center rounded-full bg-emerald-100 px-2.5 py-0.5 text-emerald-700",4,"ngIf"],["class","inline-flex items-center justify-center rounded-full bg-red-100 px-2.5 py-0.5 text-red-700",4,"ngIf"],[1,"my-2"],[1,"mt-1.5","flex","flex-wrap","gap-4"],[1,"flex","flex-col","items-center"],[1,"text-sm","font-medium","text-gray-600"],[1,"text-xs","text-gray-500"],[1,"mt-4","w-full","font-medium","text-white","bg-orange-400","py-2","rounded-xl","shadow-lg","hover:bg-orange-500",3,"routerLink"],[1,"inline-flex","items-center","justify-center","rounded-full","bg-emerald-100","px-2.5","py-0.5","text-emerald-700"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 26 26","stroke-width","1.5","stroke","currentColor",1,"-ms-1","me-1.5","h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","d","M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"whitespace-nowrap","text-xs"],[1,"inline-flex","items-center","justify-center","rounded-full","bg-red-100","px-2.5","py-0.5","text-red-700"],["stroke-linecap","round","stroke-linejoin","round","d","M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"]],template:function(o,s){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"label",2),e.EFF(3,"Buscar por: "),e.k0s(),e.j41(4,"select",3),e.bIt("change",function(h){return s.selectOption(h)}),e.j41(5,"option",4),e.EFF(6,"Todos"),e.k0s(),e.j41(7,"option",5),e.EFF(8,"Pendiente de pago"),e.k0s(),e.j41(9,"option",6),e.EFF(10,"Pagados"),e.k0s()()()(),e.DNE(11,E,3,1,"div",7)(12,w,2,0,"div",7)),2&o&&(e.R7$(11),e.Y8G("ngIf",s.orderList.length>0),e.R7$(),e.Y8G("ngIf",0===s.orderList.length))},dependencies:[c.pM,c.bT,l.iI,l.Wk],encapsulation:2})}return r})();var n=i(4341),I=i(7564);let b=(()=>{class r{constructor(t,o,s,a,h){this.orderService=t,this.ticketService=o,this.orderForm=s,this.activeRoute=a,this.router=h,this.title="Nueva Orden",this.newItem=new n.MJ(""),this.newOrderForm=this.orderForm.group({ticket:[""],mesa:[""],mesero:[""]})}get currentOrder(){return this.newOrderForm.value}onSubmit(){this.newOrderForm.invalid||(this.orderService.newOrder(this.currentOrder).subscribe(t=>{}),console.log({formIsValid:this.newOrderForm.valid,value:this.newOrderForm.value}))}static#e=this.\u0275fac=function(o){return new(o||r)(e.rXU(u),e.rXU(I.Y),e.rXU(n.ok),e.rXU(l.nX),e.rXU(l.Ix))};static#t=this.\u0275cmp=e.VBU({type:r,selectors:[["new-order-page"]],standalone:!0,features:[e.aNF],decls:27,vars:4,consts:[[3,"ngSubmit","formGroup"],["formControlName","ticket"],["formControlName","mesa"],["formControlName","mesero"],[3,"click"],["for","OrderNotes",1,"block","text-sm","font-medium","text-gray-700"],["id","OrderNotes","rows","4","placeholder","Enter any additional order notes...",1,"mt-2","w-full","rounded-lg","border-gray-200","align-top","shadow-sm","sm:text-sm"],[1,"flex","items-center"],["href","#",1,"inline-block","rounded","bg-orange-400","px-4","py-2","text-xs","font-medium","text-white","hover:bg-indigo-700"],["xmlns","http://www.w3.org/2000/svg","height","24px","viewBox","0 -960 960 960","width","24px","fill","#e8eaed"],["d","M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z"],["d","M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h357l-80 80H200v560h560v-278l80-80v358q0 33-23.5 56.5T760-120H200Zm280-360ZM360-360v-170l367-367q12-12 27-18t30-6q16 0 30.5 6t26.5 18l56 57q11 12 17 26.5t6 29.5q0 15-5.5 29.5T897-728L530-360H360Zm481-424-56-56 56 56ZM440-440h56l232-232-28-28-29-28-231 231v57Zm260-260-29-28 29 28 28 28-28-28Z"]],template:function(o,s){1&o&&(e.j41(0,"form",0),e.bIt("ngSubmit",function(){return s.onSubmit()}),e.j41(1,"label"),e.EFF(2,"Turno: "),e.k0s(),e.nrm(3,"input",1),e.j41(4,"label"),e.EFF(5,"Mesa: "),e.k0s(),e.nrm(6,"input",2),e.j41(7,"label"),e.EFF(8,"Mesero: "),e.k0s(),e.nrm(9,"input",3),e.k0s(),e.j41(10,"button",4),e.bIt("click",function(){return s.onSubmit()}),e.EFF(11,"Enviar"),e.k0s(),e.j41(12,"pre"),e.EFF(13),e.nI1(14,"json"),e.k0s(),e.j41(15,"div"),e.EFF(16,' "ESTE BLOCQUE VA PERO EN EL FORMULARIO DE ORDENES" '),e.j41(17,"label",5),e.EFF(18," Order notes "),e.k0s(),e.nrm(19,"textarea",6),e.k0s(),e.j41(20,"div",7)(21,"a",8),e.qSk(),e.j41(22,"svg",9),e.nrm(23,"path",10),e.k0s()(),e.joV(),e.j41(24,"a",8),e.qSk(),e.j41(25,"svg",9),e.nrm(26,"path",11),e.k0s()()()),2&o&&(e.Y8G("formGroup",s.newOrderForm),e.R7$(13),e.JRh(e.bMT(14,2,s.currentOrder)))},dependencies:[c.MD,c.TG,n.X1,n.qT,n.me,n.BC,n.cb,n.j4,n.JD],encapsulation:2})}return r})();var T=i(5558),R=i(2278);let x=(()=>{class r{constructor(t){this.http=t,this.baseUrl=g.c.baseUrl}getOrderDetails(t){return this.http.get(`${this.baseUrl}/carts/orders/${t}`).pipe((0,m.W)(()=>(0,p.of)(void 0)))}addProductToOrder(t,o){return this.http.post(`${this.baseUrl}/carts/${t}`,o)}deleteProductFromOrder(t){return this.http.delete(`${this.baseUrl}/carts/product/${t}`)}static#e=this.\u0275fac=function(o){return new(o||r)(e.KVO(F.Qq))};static#t=this.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function $(r,d){if(1&r&&(e.j41(0,"option",11),e.EFF(1),e.k0s()),2&r){const t=d.$implicit;e.Y8G("value",t.id),e.R7$(),e.JRh(t.title)}}let N=(()=>{class r{constructor(t,o,s,a){this.productService=t,this.orderCartService=o,this.formBuilder=s,this.activatedRoute=a,this.products=[],this.addToOrderForm=this.formBuilder.group({product:["",n.k0.required],quantity:[1,[n.k0.required,n.k0.min(1)]]})}ngOnInit(){this.activatedRoute.params.subscribe(t=>{this.orderId=+t.id,isNaN(this.orderId)?console.error("El ID de la orden no es un n\xfamero v\xe1lido"):console.log("Order ID:",this.orderId)}),this.loadProducts()}loadProducts(){this.productService.getProducts().subscribe(t=>{this.products=t})}submit(){const t={product:this.addToOrderForm.get("product")?.value,quantity:this.addToOrderForm.get("quantity")?.value};this.orderCartService.addProductToOrder(this.orderId,t).subscribe(o=>{console.log("Solicitud POST exitosa",o)},o=>{console.error("Error en la solicitud POST",o)}),location.reload()}removeProduct(){}static#e=this.\u0275fac=function(o){return new(o||r)(e.rXU(R.b),e.rXU(x),e.rXU(n.ok),e.rXU(l.nX))};static#t=this.\u0275cmp=e.VBU({type:r,selectors:[["app-add-to-order"]],standalone:!0,features:[e.aNF],decls:16,vars:2,consts:[[1,"text-xl","pb-2","font-bold","text-orange-400"],[1,"flex","items-center","justify-center"],[1,"flex","gap-4","bg-white","px-3","py-2","rounded-lg","shadow-lg","max-w-xl",3,"formGroup"],[1,"flex","flex-col"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],["formControlName","product",1,"border","rounded","px-2","py-1","text-center","w-full"],[3,"value",4,"ngFor","ngForOf"],[1,"flex","flex-col","grow","w-16"],["type","number","formControlName","quantity",1,"px-2","py-1","bg-white","border","rounded","border-gray-300","w-full"],[1,""],["type","button",1,"mt-5","py-2","px-4","text-sm","font-medium","text-white","bg-orange-400","rounded-md","shadow-lg","hover:bg-orange-500",3,"click"],[3,"value"]],template:function(o,s){1&o&&(e.j41(0,"h2",0),e.EFF(1,"Agregar plato"),e.k0s(),e.j41(2,"div",1)(3,"form",2)(4,"div",3)(5,"label",4),e.EFF(6,"Plato: "),e.k0s(),e.j41(7,"select",5),e.DNE(8,$,2,2,"option",6),e.k0s()(),e.j41(9,"div",7)(10,"label",4),e.EFF(11,"Cantidad: "),e.k0s(),e.nrm(12,"input",8),e.k0s(),e.j41(13,"div",9)(14,"button",10),e.bIt("click",function(){return s.submit()}),e.EFF(15," Enviar "),e.k0s()()()()),2&o&&(e.R7$(3),e.Y8G("formGroup",s.addToOrderForm),e.R7$(5),e.Y8G("ngForOf",s.products))},dependencies:[c.pM,n.YN,n.qT,n.xH,n.y7,n.me,n.Q0,n.wz,n.BC,n.cb,n.X1,n.j4,n.JD],encapsulation:2})}return r})(),D=(()=>{class r{constructor(t,o){this.orderCartService=t,this.activatedRoute=o,this.itemList=[],this.formBuilder=(0,e.WQX)(n.ok),this.removeFrom=this.formBuilder.group({itemId:["",[n.k0.required]]})}ngOnInit(){this.activatedRoute.params.subscribe(t=>{this.orderId=+t.id,isNaN(this.orderId)?console.error("El ID de la orden no es un n\xfamero v\xe1lido"):console.log("Order ID:",this.orderId)})}removeProduct(){const{itemId:t}=this.removeFrom.value;this.orderCartService.deleteProductFromOrder(t).subscribe(o=>{alert("Item eliminado"),location.reload()},o=>{console.error("No se pudo eliminar",o)})}static#e=this.\u0275fac=function(o){return new(o||r)(e.rXU(x),e.rXU(l.nX))};static#t=this.\u0275cmp=e.VBU({type:r,selectors:[["app-remove-from-order"]],standalone:!0,features:[e.aNF],decls:11,vars:1,consts:[[1,"text-xl","pb-2","font-bold","text-orange-400"],[1,"flex","items-center","justify-center"],[1,"flex","gap-4","bg-white","px-3","py-2","rounded-lg","shadow-lg","max-w-xl",3,"formGroup"],[1,"flex","flex-col"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","number","formControlName","itemId",1,"px-2","py-1","bg-white","border","rounded","border-gray-300","w-full"],[1,""],["type","button",1,"mt-5","py-2","px-4","text-sm","font-medium","text-white","bg-orange-400","rounded-md","shadow-lg","hover:bg-orange-500",3,"click"]],template:function(o,s){1&o&&(e.j41(0,"h2",0),e.EFF(1,"Eliminar plato"),e.k0s(),e.j41(2,"div",1)(3,"form",2)(4,"div",3)(5,"label",4),e.EFF(6,"ID : "),e.k0s(),e.nrm(7,"input",5),e.k0s(),e.j41(8,"div",6)(9,"button",7),e.bIt("click",function(){return s.removeProduct()}),e.EFF(10," Eliminar "),e.k0s()()()()),2&o&&(e.R7$(3),e.Y8G("formGroup",s.removeFrom))},dependencies:[n.YN,n.qT,n.me,n.Q0,n.BC,n.cb,n.X1,n.j4,n.JD],encapsulation:2})}return r})();function S(r,d){if(1&r&&(e.j41(0,"tbody")(1,"tr",13)(2,"td",14),e.EFF(3),e.k0s(),e.j41(4,"td",14),e.EFF(5),e.k0s(),e.j41(6,"td",14),e.EFF(7),e.k0s(),e.j41(8,"td",14),e.EFF(9),e.k0s()()()),2&r){const t=d.$implicit;e.R7$(3),e.JRh(t.id),e.R7$(2),e.JRh(t.product),e.R7$(2),e.JRh(t.quantity),e.R7$(2),e.JRh(t.subtotal)}}function U(r,d){if(1&r&&(e.j41(0,"div")(1,"div",2)(2,"div",3)(3,"div",4)(4,"h2",5),e.EFF(5,"Listado de Productos"),e.k0s(),e.j41(6,"div",6)(7,"table",7)(8,"thead",8)(9,"tr")(10,"th",9),e.EFF(11," ID "),e.k0s(),e.j41(12,"th",9),e.EFF(13," Producto "),e.k0s(),e.j41(14,"th",9),e.EFF(15," Cantidad "),e.k0s(),e.j41(16,"th",9),e.EFF(17," Subtotal "),e.k0s()()(),e.DNE(18,S,10,4,"tbody",10),e.j41(19,"tfoot",8)(20,"th",9),e.EFF(21,"Total pagar"),e.k0s(),e.nrm(22,"th",9)(23,"th",9),e.j41(24,"th",9),e.EFF(25," $$$$ "),e.k0s()()()(),e.j41(26,"div",11)(27,"div",12),e.nrm(28,"app-add-to-order"),e.k0s(),e.j41(29,"div",12),e.nrm(30,"app-remove-from-order"),e.k0s()()()()()()),2&r){const t=e.XpG();e.R7$(18),e.Y8G("ngForOf",t.orderDetails)}}function P(r,d){1&r&&(e.j41(0,"p"),e.EFF(1,"No hay pedidos en la orden."),e.k0s(),e.nrm(2,"app-add-to-order"))}const L=[{path:"",children:[{path:"",component:C},{path:"details/:id",component:(()=>{class r{constructor(t,o,s){this.orderService=t,this.activatedRoute=o,this.router=s}ngOnInit(){this.activatedRoute.params.pipe((0,T.n)(({id:t})=>this.orderService.getOrderDetails(t))).subscribe(t=>{if(!t)return this.router.navigate(["/orders"]);this.orderDetails=t,console.log(t)})}static#e=this.\u0275fac=function(o){return new(o||r)(e.rXU(u),e.rXU(l.nX),e.rXU(l.Ix))};static#t=this.\u0275cmp=e.VBU({type:r,selectors:[["app-details-page"]],standalone:!0,features:[e.aNF],decls:3,vars:2,consts:[["divNoContent",""],[4,"ngIf","ngIfElse"],[1,"flex","flex-col"],[1,"overflow-x-auto","sm:mx-0.5","lg:mx-0.5"],[1,"py-2","inline-block","min-w-full","sm:px-6","lg:px-8"],[1,"text-xl","pb-2","font-bold","text-orange-400"],[1,"overflow-hidden","rounded-lg","border","border-gray-100","py-0","shadow-sm"],[1,"min-w-full"],[1,"bg-gray-200","border-b"],[1,"text-sm","font-medium","text-gray-600","px-6","py-4","text-left"],[4,"ngFor","ngForOf"],[1,"flex","flex-wrap","justify-between"],[1,"my-2"],[1,"bg-white","border-b","transition","duration-300","ease-in-out","hover:bg-gray-100"],[1,"text-sm","text-gray-500","px-6","py-4","whitespace-nowrap"]],template:function(o,s){if(1&o&&e.DNE(0,U,31,1,"div",1)(1,P,3,0,"ng-template",null,0,e.C5r),2&o){const a=e.sdS(2);e.Y8G("ngIf",null==s.orderDetails?null:s.orderDetails.length)("ngIfElse",a)}},dependencies:[c.MD,c.Sq,c.bT,l.iI,N,D],encapsulation:2})}return r})()},{path:"new",component:b},{path:"edit/:id",component:b}]}]}}]);